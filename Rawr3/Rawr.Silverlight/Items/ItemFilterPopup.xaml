<UserControl
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d"
	xmlns:common="clr-namespace:System.Windows;assembly=System.Windows.Controls"
	xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
	x:Class="Rawr.Silverlight.ItemFilterPopup">
	<UserControl.Resources>	
		<common:HierarchicalDataTemplate x:Key="FilterTemplate" ItemsSource="{Binding Filters}">
			<CheckBox
				IsTabStop="False"
				IsThreeState="True"
				IsChecked="{Binding Enabled, Mode=TwoWay}"
				Content="{Binding Name}"
                LostFocus="FocusLost"
				/>
		</common:HierarchicalDataTemplate>
	</UserControl.Resources>

	<Grid>

		<Popup x:Name="FilterPopup" VerticalAlignment="Bottom" HorizontalAlignment="Left" VerticalOffset="2">
			<Grid MaxWidth="250" MaxHeight="300" Background="#FFFFFFFF">
				<controls:TreeView x:Name="FilterTree"
					Grid.Column="0" LostFocus="FocusLost"
					ItemTemplate="{StaticResource FilterTemplate}">
				</controls:TreeView>
			</Grid>
		</Popup>
		<ToggleButton x:Name="Toggle" Content="Filter" Checked="ShowPopup" Unchecked="HidePopup" LostFocus="FocusLost" />
	</Grid>
</UserControl>